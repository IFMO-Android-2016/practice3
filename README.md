# Интеграция с ВКонтакте

В рамках этого практического задания предлагается сделать небольшое приложение, использующее SDK социальной сети ВКонтакте для выполнения авторизации и нескольких несложных запросов. Работа с SDK описана на странице официально документациий для разработчиков ВКонтакте: https://vk.com/dev/android_sdk -- и в процессе выполнения этого задания надо будет ознакомиться с ней и выполнить описанные в ней инструкции. В результате получится приложение, зарегистрированное для работы с ВКонтакте, которое можно будет использовать в качестве основы для реализации функций интеграции с социальной сетью, если такие функции понадобятся, к примеру, в курсовом проекте.

## Архитектура приложения

Первый экран приложения (```MainActivity```) содержит только кнопку "Войти через ВКонтакте", по нажатию на которую открывается второй экран.

<img src="https://github.com/IFMO-Android-2016/practice3/blob/master/screenshots/first_screen.png" width="320px"/>

Второй экран приложения (```VkDemoActivity```) при старте проверят, был ли пользователь приложения ранее уже авторизован во ВКонтакте, и если нет -- выполняет авторизацию при помощи Vk SDK. В процессе этой авторизации может быть показан либо экран приложения ВКонтакте, если оно установлено на устройстве, либо страница мобильного сайта ВКонтакте, показанная в WebView внутри приложения. После успешной авторизации выполняется запрос информации о пользовтеле и показывается его фотография и имя. По нажатию на кнопку "Выйти" происходит выход на первый экран, чтобы можно было снова залогиниться тем же или другим пользователем.

<table>
<tr>
<td><img src="https://github.com/IFMO-Android-2016/practice3/blob/master/screenshots/vk_oauth_screen.png" width="320px"/></td>
<td><img src="https://github.com/IFMO-Android-2016/practice3/blob/master/screenshots/user_info_screen.png" width="320px"/></td>
</tr>
</table>

Код первого экрана уже реализован, а код второго экрана надо написать в классе ```VkDemoActivity``` в рамках этого задания.

## Задание 1 -- Интеграция с VK SDK

Для того, чтобы можно было использовать функции Vk SDK в нашем приложении, нужно выполнить инструкции, описанные здесь: https://vk.com/dev/android_sdk

Подробнее по шагам:

### Поменять ID приложения

ID Anroid приложения указывается в файле ```build.gradle``` в модуле приложения. По этому ID приложения идентифицируются, например, в магазине приложений Google Play, а в нашем случае он нужен для идентификации приложения в API ВКонтакте. У двух приложений ID не может быть одинаковым, поэтому вам следует поменять ID, который сейчас прописан в исходном коде задания.

Найдите в файле ```app/build.gradle``` строчку, содержащую ```applicationId "ru.ifmo.droid2016.vkdemo"``` и замените этот ID на свой новый уникальный ID. Можно просто добавить в конце свою фамилию или другое уникальное слово.

### Получить отпечаток сертификата

Следуя инструкции [https://vk.com/dev/android_sdk?f=1.1%20%D0%9E%D1%82%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%BE%D0%BA%20%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%B0](https://vk.com/dev/android_sdk?f=1.1%20%D0%9E%D1%82%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%BE%D0%BA%20%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%B0), определить отпечаток сертификата, установленного на компьютере, который вы используете для разработки. Это делается при помощи утилиты ```keytool```, которая входит в состам JDK. В процессе выполнения задания нужно использовать debug сертификат (не release). Команда для получения сертификата выглядит приблизительно так (на Windows):

```
keytool -exportcert -alias androiddebugkey -keystore C:/Users/<имя пользователя Windows>/.android/debug.keystore -list -v
```

Дефолтный пароль для keystore: ```android```

В выводе этой команды надо найти строчку вида

```
    SHA1: CD:4C:07:48:CD:1A:D0:63:DB:43:9F:57:24:5A:49:90:C7:33:21:8E
```

Из которой надо взять шестнадцатеричное значение, удалив все двоеточия -- это и будет отпечаток сертификата, как он используется для идентификации приложения в API ВКонтакте: ```CD4C0748CD1AD063DB439F57245A4990C733218E```.
